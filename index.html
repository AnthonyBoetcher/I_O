<!DOCTYPE html>
<html lang="en">
<head>
    <title>I/O</title>
    <meta charset="utf-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
    <link rel="icon" type="image/x-icon" href="favicon.jpg">

    <style>
        #leaflet-map {
            width: 100vw;
            height: 100vh;
        }

        .iframe-popup {
            border: none;
            width: 300px;
            height: 200px;
        }
    </style>
</head>
<body>
  <div id="leaflet-map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <script>
       // Initialize map
       var map = L.map("leaflet-map").setView([-33.97581315448854, 18.455271611987715], 24);
       var mapboxLayer = L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}", {
            attribution: "Map data &copy; <a href='https://www.openstreetmap.org/'>OpenStreetMap</a> contributors, <a href='https://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>, Imagery Â© <a href='https://www.mapbox.com/'>Mapbox</a>",
            maxZoom: 18,
            id: "mapbox/streets-v11",
            tileSize: 512,
            zoomOffset: -1,
            accessToken: "pk.eyJ1IjoibmV3YW50dHdvIiwiYSI6ImNscWF3eHFvNjFxMDkyc252bDZnMHo0bW4ifQ.aibMJNvuCUcEtYZmu9VTVw"
        });
        map.addLayer(mapboxLayer);

        // Define custom icon
        var IoTicon = L.icon({
            iconUrl: "icon.png",  // Ensure this image exists
            iconSize: [40, 40],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowUrl: "https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",
            shadowSize: [41, 41]
        });

        // Define markers with metadata and URLs for iframes
        var markers = [
            L.marker([-33.97580256588796, 18.455148569840915], { icon: IoTicon })
                .bindPopup("<iframe class='iframe-popup' src='https://www.example1.com'></iframe>"),
            L.marker([-33.97593925499413, 18.4552646473379], { icon: IoTicon })
                .bindPopup("<iframe class='iframe-popup' src='https://www.example2.com'></iframe>"),
            L.marker([-33.97581315448854, 18.455271611987715], { icon: IoTicon })
                .bindPopup("<iframe class='iframe-popup' src='https://www.example3.com'></iframe>"),
            L.marker([-33.975699567613475, 18.455282058962442], { icon: IoTicon })
                .bindPopup("<iframe class='iframe-popup' src='https://www.example4.com'></iframe>"),
            L.marker([-33.9757746504801, 18.455423673508765], { icon: IoTicon })
                .bindPopup("<iframe class='iframe-popup' src='https://www.example5.com'></iframe>"),
            L.marker([-33.9757409594584, 18.45544108513331], { icon: IoTicon })
                .bindPopup("<iframe class='iframe-popup' src='https://www.example6.com'></iframe>"),
            L.marker([-33.97564469932286, 18.45531107833669], { icon: IoTicon })
                .bindPopup("<iframe class='iframe-popup' src='https://www.example7.com'></iframe>")
        ];

        // Cluster markers
        var markerCluster = L.markerClusterGroup();
        markers.forEach(marker => markerCluster.addLayer(marker));

        // Add marker cluster group to the map
        map.addLayer(markerCluster);

        // Fit map to markers
        map.fitBounds(markerCluster.getBounds());
    </script>
</body>
</html>
